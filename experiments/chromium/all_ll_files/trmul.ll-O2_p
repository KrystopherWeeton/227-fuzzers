; ModuleID = '../../third_party/ruy/src/ruy/trmul.cc'
source_filename = "../../third_party/ruy/src/ruy/trmul.cc"
target datalayout = "e-m:e-i64:64-f80:128-n8:16:32:64-S128"
target triple = "x86_64-unknown-linux-gnu"

%"struct.ruy::TrMulParams" = type { i8, %"class.ruy::SidePair", void (i32, %"class.ruy::SidePair.0"*, i8*, %"class.ruy::SidePair.1"*, %"class.ruy::SidePair.1"*, %"struct.ruy::EMat"*)*, %"class.ruy::SidePair.2", %"struct.ruy::EMat", %"class.ruy::SidePair.0", %"class.ruy::SidePair.3", i8* }
%"class.ruy::SidePair" = type { [2 x void (i32, %"struct.ruy::EMat"*, %"struct.ruy::PEMat"*, i32, i32)*] }
%"struct.ruy::PEMat" = type <{ %"struct.ruy::Type", [5 x i8], i8*, %"struct.ruy::Type", [5 x i8], i8*, %"struct.ruy::PMatLayout", i32, [4 x i8] }>
%"struct.ruy::Type" = type { i8, i8, i8 }
%"struct.ruy::PMatLayout" = type { i32, i32, i32, i8, %"struct.ruy::KernelLayout" }
%"struct.ruy::KernelLayout" = type { i8, i8, i8 }
%"class.ruy::SidePair.1" = type { [2 x i32] }
%"class.ruy::SidePair.2" = type { [2 x %"struct.ruy::EMat"] }
%"struct.ruy::EMat" = type <{ %"struct.ruy::Type", [5 x i8], i8*, %"struct.ruy::MatLayout", i32, i8, [3 x i8] }>
%"struct.ruy::MatLayout" = type <{ i32, i32, i32, i8, [3 x i8] }>
%"class.ruy::SidePair.0" = type { [2 x %"struct.ruy::PEMat"] }
%"class.ruy::SidePair.3" = type { [2 x i8] }
%"class.ruy::Ctx" = type { i8 }
%"struct.ruy::BlockMap" = type { i32, i32, %"class.ruy::SidePair.1", i32, %"class.ruy::SidePair.1", %"class.ruy::SidePair.1", %"class.ruy::SidePair.1", %"class.ruy::SidePair.1" }
%"class.ruy::SidePair.5" = type { [2 x %"struct.std::__1::atomic"*] }
%"struct.std::__1::atomic" = type { %"struct.std::__1::__atomic_base" }
%"struct.std::__1::__atomic_base" = type { %"struct.std::__1::__cxx_atomic_impl" }
%"struct.std::__1::__cxx_atomic_impl" = type { %"struct.std::__1::__cxx_atomic_base_impl" }
%"struct.std::__1::__cxx_atomic_base_impl" = type { i8 }
%"class.ruy::CpuInfo" = type { i32, %"struct.ruy::CpuCacheParams" }
%"struct.ruy::CpuCacheParams" = type { i32, i32 }
%"class.ruy::Allocator" = type { i8*, i64, i64, %"class.std::__1::vector", i64 }
%"class.std::__1::vector" = type { %"class.std::__1::__vector_base" }
%"class.std::__1::__vector_base" = type { i8**, i8**, %"class.std::__1::__compressed_pair" }
%"class.std::__1::__compressed_pair" = type { %"struct.std::__1::__compressed_pair_elem" }
%"struct.std::__1::__compressed_pair_elem" = type { i8** }
%"class.ruy::TuningResolver" = type { i32, i32, %"class.std::__1::chrono::time_point", %"class.std::__1::chrono::duration" }
%"class.std::__1::chrono::time_point" = type { %"class.std::__1::chrono::duration" }
%"class.std::__1::chrono::duration" = type { i64 }
%"struct.ruy::(anonymous namespace)::TrMulTask" = type { %"struct.ruy::Task", %"struct.ruy::TrMulParams"*, %"struct.ruy::BlockMap"*, %"struct.std::__1::atomic.6"*, i32, i8, %"class.ruy::SidePair.5", %"class.ruy::TuningResolver"*, %"class.ruy::Allocator"*, %"class.ruy::SidePair.11" }
%"struct.ruy::Task" = type { i32 (...)** }
%"struct.std::__1::atomic.6" = type { %"struct.std::__1::__atomic_base.7" }
%"struct.std::__1::__atomic_base.7" = type { %"struct.std::__1::__atomic_base.8" }
%"struct.std::__1::__atomic_base.8" = type { %"struct.std::__1::__cxx_atomic_impl.9" }
%"struct.std::__1::__cxx_atomic_impl.9" = type { %"struct.std::__1::__cxx_atomic_base_impl.10" }
%"struct.std::__1::__cxx_atomic_base_impl.10" = type { i32 }
%"class.ruy::SidePair.11" = type { [2 x i8*] }
%"class.ruy::ThreadPool" = type { %"class.std::__1::vector.12", %"class.ruy::BlockingCounter", %"class.std::__1::chrono::duration" }
%"class.std::__1::vector.12" = type { %"class.std::__1::__vector_base.13" }
%"class.std::__1::__vector_base.13" = type { %"class.ruy::Thread"**, %"class.ruy::Thread"**, %"class.std::__1::__compressed_pair.14" }
%"class.ruy::Thread" = type opaque
%"class.std::__1::__compressed_pair.14" = type { %"struct.std::__1::__compressed_pair_elem.15" }
%"struct.std::__1::__compressed_pair_elem.15" = type { %"class.ruy::Thread"** }
%"class.ruy::BlockingCounter" = type { %"struct.std::__1::atomic.6", %"class.std::__1::condition_variable", %"class.std::__1::mutex" }
%"class.std::__1::condition_variable" = type { %union.pthread_cond_t }
%union.pthread_cond_t = type { %struct.__pthread_cond_s }
%struct.__pthread_cond_s = type { %union.anon, %union.anon.19, [2 x i32], [2 x i32], i32, i32, [2 x i32] }
%union.anon = type { i64 }
%union.anon.19 = type { i64 }
%"class.std::__1::mutex" = type { %union.pthread_mutex_t }
%union.pthread_mutex_t = type { %struct.__pthread_mutex_s }
%struct.__pthread_mutex_s = type { i32, i32, i32, i32, i32, i16, i16, %struct.__pthread_internal_list }
%struct.__pthread_internal_list = type { %struct.__pthread_internal_list*, %struct.__pthread_internal_list* }

$_ZN3ruy4TaskD2Ev = comdat any

@_ZTVN3ruy12_GLOBAL__N_19TrMulTaskE = internal unnamed_addr constant { [5 x i8*] } { [5 x i8*] [i8* null, i8* null, i8* bitcast (void (%"struct.ruy::Task"*)* @_ZN3ruy4TaskD2Ev to i8*), i8* bitcast (void (%"struct.ruy::(anonymous namespace)::TrMulTask"*)* @_ZN3ruy12_GLOBAL__N_19TrMulTaskD0Ev to i8*), i8* bitcast (void (%"struct.ruy::(anonymous namespace)::TrMulTask"*)* @_ZN3ruy12_GLOBAL__N_19TrMulTask3RunEv to i8*)] }, align 8

; Function Attrs: nounwind ssp uwtable
define hidden void @_ZN3ruy5TrMulEPNS_11TrMulParamsEPNS_3CtxE(%"struct.ruy::TrMulParams"*, %"class.ruy::Ctx"*) local_unnamed_addr #0 {
  %3 = alloca %"class.ruy::SidePair.1", align 4
  %4 = alloca %"class.ruy::SidePair.1", align 4
  %5 = alloca %"struct.ruy::BlockMap", align 4
  %6 = alloca %"class.ruy::SidePair.5", align 8
  %7 = tail call i32 @_ZNK3ruy3Ctx15max_num_threadsEv(%"class.ruy::Ctx"* %1) #6
  %8 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %0, i64 0, i32 5
  %9 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %0, i64 0, i32 3, i32 0, i64 0, i32 3, i32 1
  %10 = load i32, i32* %9, align 4
  %11 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %0, i64 0, i32 3, i32 0, i64 1, i32 3, i32 1
  %12 = load i32, i32* %11, align 4
  %13 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %0, i64 0, i32 3, i32 0, i64 0, i32 3, i32 0
  %14 = load i32, i32* %13, align 8
  %15 = icmp eq i32 %10, 1
  br i1 %15, label %20, label %16

16:                                               ; preds = %2
  %17 = add nsw i32 %10, -1
  %18 = tail call i32 @llvm.ctlz.i32(i32 %17, i1 true) #6, !range !2
  %19 = sub nuw nsw i32 32, %18
  br label %20

20:                                               ; preds = %16, %2
  %21 = phi i32 [ %19, %16 ], [ 0, %2 ]
  %22 = icmp eq i32 %12, 1
  br i1 %22, label %27, label %23

23:                                               ; preds = %20
  %24 = add nsw i32 %12, -1
  %25 = tail call i32 @llvm.ctlz.i32(i32 %24, i1 true) #6, !range !2
  %26 = sub nuw nsw i32 32, %25
  br label %27

27:                                               ; preds = %23, %20
  %28 = phi i32 [ %26, %23 ], [ 0, %20 ]
  %29 = add nsw i32 %28, %21
  %30 = icmp eq i32 %14, 1
  br i1 %30, label %35, label %31

31:                                               ; preds = %27
  %32 = add nsw i32 %14, -1
  %33 = tail call i32 @llvm.ctlz.i32(i32 %32, i1 true) #6, !range !2
  %34 = sub nuw nsw i32 32, %33
  br label %35

35:                                               ; preds = %27, %31
  %36 = phi i32 [ %34, %31 ], [ 0, %27 ]
  %37 = add nsw i32 %29, %36
  %38 = icmp sgt i32 %37, 15
  %39 = select i1 %38, i32 %37, i32 15
  %40 = add nsw i32 %39, -15
  %41 = shl i32 1, %40
  %42 = tail call i32 @_ZNK3ruy3Ctx15max_num_threadsEv(%"class.ruy::Ctx"* %1) #6
  %43 = icmp slt i32 %42, %41
  %44 = select i1 %43, i32 %42, i32 %41
  %45 = tail call %"class.ruy::CpuInfo"* @_ZN3ruy3Ctx15mutable_cpuinfoEv(%"class.ruy::Ctx"* %1) #6
  %46 = tail call dereferenceable(8) %"struct.ruy::CpuCacheParams"* @_ZN3ruy7CpuInfo11CacheParamsEv(%"class.ruy::CpuInfo"* %45) #6
  %47 = icmp eq i32 %44, 1
  br i1 %47, label %48, label %59

48:                                               ; preds = %35
  %49 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %0, i64 0, i32 3, i32 0, i64 1, i32 0, i32 2
  %50 = load i8, i8* %49, align 2
  %51 = zext i8 %50 to i32
  %52 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %0, i64 0, i32 3, i32 0, i64 0, i32 0, i32 2
  %53 = load i8, i8* %52, align 2
  %54 = zext i8 %53 to i32
  %55 = tail call i32 @_ZN3ruy17GetTraversalOrderEiiiiiRKNS_14CpuCacheParamsE(i32 %10, i32 %12, i32 %14, i32 %54, i32 %51, %"struct.ruy::CpuCacheParams"* dereferenceable(8) %46) #6
  %56 = icmp ne i32 %12, 1
  %57 = icmp ne i32 %55, 0
  %58 = and i1 %56, %57
  br i1 %58, label %59, label %60

59:                                               ; preds = %48, %35
  br label %60

60:                                               ; preds = %48, %59
  %61 = phi i32 [ 0, %59 ], [ 1, %48 ]
  %62 = tail call %"class.ruy::Allocator"* @_ZN3ruy3Ctx16GetMainAllocatorEv(%"class.ruy::Ctx"* %1) #6
  %63 = getelementptr inbounds %"class.ruy::Allocator", %"class.ruy::Allocator"* %62, i64 0, i32 1
  %64 = getelementptr inbounds %"class.ruy::Allocator", %"class.ruy::Allocator"* %62, i64 0, i32 2
  %65 = getelementptr inbounds %"class.ruy::Allocator", %"class.ruy::Allocator"* %62, i64 0, i32 0
  %66 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %0, i64 0, i32 6, i32 0, i64 0
  %67 = load i8, i8* %66, align 1, !range !3
  %68 = icmp eq i8 %67, 0
  br i1 %68, label %69, label %126

69:                                               ; preds = %60
  %70 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %0, i64 0, i32 5, i32 0, i64 0, i32 6, i32 3
  %71 = load i8, i8* %70, align 4
  %72 = icmp eq i8 %71, 0
  %73 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %0, i64 0, i32 5, i32 0, i64 0, i32 6, i32 1
  %74 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %0, i64 0, i32 5, i32 0, i64 0, i32 6, i32 0
  %75 = load i32, i32* %73, align 4
  %76 = load i32, i32* %74, align 4
  %77 = select i1 %72, i32 %75, i32 %76
  %78 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %0, i64 0, i32 5, i32 0, i64 0, i32 6, i32 2
  %79 = load i32, i32* %78, align 4
  %80 = mul nsw i32 %79, %77
  %81 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %0, i64 0, i32 5, i32 0, i64 0, i32 0, i32 2
  %82 = load i8, i8* %81, align 2
  %83 = zext i8 %82 to i32
  %84 = mul nsw i32 %80, %83
  %85 = icmp eq i32 %84, 0
  br i1 %85, label %100, label %86

86:                                               ; preds = %69
  %87 = sext i32 %84 to i64
  %88 = add nsw i64 %87, 63
  %89 = and i64 %88, -64
  %90 = load i64, i64* %63, align 8
  %91 = add nsw i64 %90, %89
  %92 = load i64, i64* %64, align 8
  %93 = icmp sgt i64 %91, %92
  br i1 %93, label %98, label %94

94:                                               ; preds = %86
  %95 = load i8*, i8** %65, align 8
  %96 = getelementptr inbounds i8, i8* %95, i64 %90
  store i64 %91, i64* %63, align 8
  %97 = icmp eq i8* %96, null
  br i1 %97, label %98, label %100

98:                                               ; preds = %94, %86
  %99 = tail call i8* @_ZN3ruy9Allocator12AllocateSlowEl(%"class.ruy::Allocator"* %62, i64 %89) #6
  br label %100

100:                                              ; preds = %98, %94, %69
  %101 = phi i8* [ null, %69 ], [ %99, %98 ], [ %96, %94 ]
  %102 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %0, i64 0, i32 5, i32 0, i64 0, i32 2
  store i8* %101, i8** %102, align 8
  %103 = load i32, i32* %73, align 4
  %104 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %0, i64 0, i32 5, i32 0, i64 0, i32 3, i32 2
  %105 = load i8, i8* %104, align 2
  %106 = zext i8 %105 to i32
  %107 = mul nsw i32 %103, %106
  %108 = icmp eq i32 %107, 0
  br i1 %108, label %123, label %109

109:                                              ; preds = %100
  %110 = sext i32 %107 to i64
  %111 = add nsw i64 %110, 63
  %112 = and i64 %111, -64
  %113 = load i64, i64* %63, align 8
  %114 = add nsw i64 %113, %112
  %115 = load i64, i64* %64, align 8
  %116 = icmp sgt i64 %114, %115
  br i1 %116, label %121, label %117

117:                                              ; preds = %109
  %118 = load i8*, i8** %65, align 8
  %119 = getelementptr inbounds i8, i8* %118, i64 %113
  store i64 %114, i64* %63, align 8
  %120 = icmp eq i8* %119, null
  br i1 %120, label %121, label %123

121:                                              ; preds = %117, %109
  %122 = tail call i8* @_ZN3ruy9Allocator12AllocateSlowEl(%"class.ruy::Allocator"* %62, i64 %112) #6
  br label %123

123:                                              ; preds = %100, %117, %121
  %124 = phi i8* [ null, %100 ], [ %122, %121 ], [ %119, %117 ]
  %125 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %0, i64 0, i32 5, i32 0, i64 0, i32 5
  store i8* %124, i8** %125, align 8
  br label %126

126:                                              ; preds = %60, %123
  %127 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %0, i64 0, i32 6, i32 0, i64 1
  %128 = load i8, i8* %127, align 1, !range !3
  %129 = icmp eq i8 %128, 0
  br i1 %129, label %321, label %378

130:                                              ; preds = %378
  %131 = tail call i32 @_ZN3ruy3Ctx19GetMainThreadTuningEv(%"class.ruy::Ctx"* %1) #6
  %132 = bitcast %"class.ruy::SidePair.1"* %3 to i8*
  call void @llvm.lifetime.start.p0i8(i64 8, i8* nonnull %132) #6
  %133 = getelementptr inbounds %"class.ruy::SidePair.1", %"class.ruy::SidePair.1"* %3, i64 0, i32 0, i64 0
  %134 = getelementptr inbounds %"class.ruy::SidePair.1", %"class.ruy::SidePair.1"* %3, i64 0, i32 0, i64 1
  store i32 0, i32* %133, align 4
  store i32 0, i32* %134, align 4
  %135 = bitcast %"class.ruy::SidePair.1"* %4 to i8*
  call void @llvm.lifetime.start.p0i8(i64 8, i8* nonnull %135) #6
  %136 = getelementptr inbounds %"class.ruy::SidePair.1", %"class.ruy::SidePair.1"* %4, i64 0, i32 0, i64 0
  %137 = getelementptr inbounds %"class.ruy::SidePair.1", %"class.ruy::SidePair.1"* %4, i64 0, i32 0, i64 1
  %138 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %0, i64 0, i32 5, i32 0, i64 0, i32 6, i32 1
  %139 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %0, i64 0, i32 5, i32 0, i64 1, i32 6, i32 1
  %140 = load i32, i32* %138, align 4
  store i32 %140, i32* %136, align 4
  %141 = load i32, i32* %139, align 4
  store i32 %141, i32* %137, align 4
  %142 = load i8, i8* %66, align 1, !range !3
  %143 = icmp eq i8 %142, 0
  br i1 %143, label %144, label %149

144:                                              ; preds = %130
  %145 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %0, i64 0, i32 1, i32 0, i64 0
  %146 = load void (i32, %"struct.ruy::EMat"*, %"struct.ruy::PEMat"*, i32, i32)*, void (i32, %"struct.ruy::EMat"*, %"struct.ruy::PEMat"*, i32, i32)** %145, align 8
  %147 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %0, i64 0, i32 3, i32 0, i64 0
  %148 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %0, i64 0, i32 5, i32 0, i64 0
  tail call void %146(i32 %131, %"struct.ruy::EMat"* dereferenceable(40) %147, %"struct.ruy::PEMat"* %148, i32 0, i32 %140) #6
  br label %149

149:                                              ; preds = %130, %144
  %150 = load i8, i8* %127, align 1, !range !3
  %151 = icmp eq i8 %150, 0
  br i1 %151, label %281, label %286

152:                                              ; preds = %378
  %153 = bitcast %"struct.ruy::BlockMap"* %5 to i8*
  call void @llvm.lifetime.start.p0i8(i64 52, i8* nonnull %153) #6
  call void @llvm.memset.p0i8.i64(i8* nonnull align 4 %153, i8 -86, i64 52, i1 false)
  %154 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %0, i64 0, i32 5, i32 0, i64 0, i32 6, i32 1
  %155 = load i32, i32* %154, align 4
  %156 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %0, i64 0, i32 5, i32 0, i64 1, i32 6, i32 1
  %157 = load i32, i32* %156, align 4
  %158 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %0, i64 0, i32 5, i32 0, i64 0, i32 6, i32 4, i32 2
  %159 = load i8, i8* %158, align 1
  %160 = zext i8 %159 to i32
  %161 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %0, i64 0, i32 5, i32 0, i64 1, i32 6, i32 4, i32 2
  %162 = load i8, i8* %161, align 1
  %163 = zext i8 %162 to i32
  %164 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %0, i64 0, i32 5, i32 0, i64 0, i32 0, i32 2
  %165 = load i8, i8* %164, align 2
  %166 = zext i8 %165 to i32
  %167 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %0, i64 0, i32 5, i32 0, i64 1, i32 0, i32 2
  %168 = load i8, i8* %167, align 2
  %169 = zext i8 %168 to i32
  call void @_ZN3ruy12MakeBlockMapEiiiiiiiiRKNS_14CpuCacheParamsEPNS_8BlockMapE(i32 %155, i32 %157, i32 %14, i32 %160, i32 %163, i32 %166, i32 %169, i32 %44, %"struct.ruy::CpuCacheParams"* dereferenceable(8) %46, %"struct.ruy::BlockMap"* nonnull %5) #6
  %170 = getelementptr inbounds %"struct.ruy::BlockMap", %"struct.ruy::BlockMap"* %5, i64 0, i32 0
  %171 = load i32, i32* %170, align 4
  %172 = icmp sgt i32 %171, 1
  call void @_ZN3ruy3Ctx29EnsureThreadSpecificResourcesEi(%"class.ruy::Ctx"* %1, i32 %171) #6
  %173 = icmp sgt i32 %171, 0
  br i1 %173, label %182, label %174

174:                                              ; preds = %182, %152
  %175 = bitcast %"class.ruy::SidePair.5"* %6 to i8*
  call void @llvm.lifetime.start.p0i8(i64 16, i8* nonnull %175) #6
  %176 = getelementptr inbounds %"class.ruy::SidePair.5", %"class.ruy::SidePair.5"* %6, i64 0, i32 0, i64 1
  %177 = bitcast %"class.ruy::SidePair.5"* %6 to i8*
  call void @llvm.memset.p0i8.i64(i8* nonnull align 8 %177, i8 0, i64 16, i1 false)
  br i1 %172, label %178, label %221

178:                                              ; preds = %174
  %179 = getelementptr inbounds %"struct.ruy::BlockMap", %"struct.ruy::BlockMap"* %5, i64 0, i32 3
  %180 = load i8, i8* %66, align 1, !range !3
  %181 = icmp eq i8 %180, 0
  br i1 %181, label %189, label %218

182:                                              ; preds = %152, %182
  %183 = phi i32 [ %187, %182 ], [ 0, %152 ]
  %184 = call %"class.ruy::TuningResolver"* @_ZNK3ruy3Ctx31GetThreadSpecificTuningResolverEi(%"class.ruy::Ctx"* %1, i32 %183) #6
  %185 = call i32 @_ZNK3ruy3Ctx15explicit_tuningEv(%"class.ruy::Ctx"* %1) #6
  %186 = getelementptr inbounds %"class.ruy::TuningResolver", %"class.ruy::TuningResolver"* %184, i64 0, i32 0
  store i32 %185, i32* %186, align 8
  %187 = add nuw nsw i32 %183, 1
  %188 = icmp eq i32 %187, %171
  br i1 %188, label %174, label %182

189:                                              ; preds = %178
  %190 = load i32, i32* %179, align 4
  %191 = getelementptr inbounds %"struct.ruy::BlockMap", %"struct.ruy::BlockMap"* %5, i64 0, i32 4, i32 0, i64 0
  %192 = load i32, i32* %191, align 4
  %193 = add nsw i32 %192, %190
  %194 = shl i32 1, %193
  %195 = sext i32 %194 to i64
  %196 = add nsw i64 %195, 63
  %197 = and i64 %196, -64
  %198 = load i64, i64* %63, align 8
  %199 = add nsw i64 %197, %198
  %200 = load i64, i64* %64, align 8
  %201 = icmp sgt i64 %199, %200
  br i1 %201, label %206, label %202

202:                                              ; preds = %189
  %203 = load i8*, i8** %65, align 8
  %204 = getelementptr inbounds i8, i8* %203, i64 %198
  store i64 %199, i64* %63, align 8
  %205 = icmp eq i8* %204, null
  br i1 %205, label %206, label %208

206:                                              ; preds = %202, %189
  %207 = call i8* @_ZN3ruy9Allocator12AllocateSlowEl(%"class.ruy::Allocator"* %62, i64 %197) #6
  br label %208

208:                                              ; preds = %202, %206
  %209 = phi i8* [ %207, %206 ], [ %204, %202 ]
  %210 = bitcast %"class.ruy::SidePair.5"* %6 to i8**
  store i8* %209, i8** %210, align 8
  %211 = icmp eq i32 %193, 31
  %212 = bitcast i8* %209 to %"struct.std::__1::atomic"*
  br i1 %211, label %218, label %213

213:                                              ; preds = %208, %213
  %214 = phi i64 [ %216, %213 ], [ 0, %208 ]
  %215 = getelementptr inbounds %"struct.std::__1::atomic", %"struct.std::__1::atomic"* %212, i64 %214, i32 0, i32 0, i32 0, i32 0
  store atomic i8 0, i8* %215 monotonic, align 1
  %216 = add nuw nsw i64 %214, 1
  %217 = icmp slt i64 %216, %195
  br i1 %217, label %213, label %218

218:                                              ; preds = %213, %208, %178
  %219 = load i8, i8* %127, align 1, !range !3
  %220 = icmp eq i8 %219, 0
  br i1 %220, label %292, label %221

221:                                              ; preds = %316, %218, %311, %174
  %222 = load i64, i64* %63, align 8
  %223 = add nsw i64 %222, 64
  %224 = load i64, i64* %64, align 8
  %225 = icmp sgt i64 %223, %224
  br i1 %225, label %230, label %226

226:                                              ; preds = %221
  %227 = load i8*, i8** %65, align 8
  %228 = getelementptr inbounds i8, i8* %227, i64 %222
  store i64 %223, i64* %63, align 8
  %229 = icmp eq i8* %228, null
  br i1 %229, label %230, label %232

230:                                              ; preds = %226, %221
  %231 = call i8* @_ZN3ruy9Allocator12AllocateSlowEl(%"class.ruy::Allocator"* %62, i64 64) #6
  br label %232

232:                                              ; preds = %226, %230
  %233 = phi i8* [ %231, %230 ], [ %228, %226 ]
  %234 = icmp eq i32 %171, 0
  br i1 %234, label %250, label %235

235:                                              ; preds = %232
  %236 = sext i32 %171 to i64
  %237 = mul nsw i64 %236, 88
  %238 = add nsw i64 %237, 63
  %239 = and i64 %238, -64
  %240 = load i64, i64* %63, align 8
  %241 = add nsw i64 %240, %239
  %242 = load i64, i64* %64, align 8
  %243 = icmp sgt i64 %241, %242
  br i1 %243, label %248, label %244

244:                                              ; preds = %235
  %245 = load i8*, i8** %65, align 8
  %246 = getelementptr inbounds i8, i8* %245, i64 %240
  store i64 %241, i64* %63, align 8
  %247 = icmp eq i8* %246, null
  br i1 %247, label %248, label %250

248:                                              ; preds = %244, %235
  %249 = call i8* @_ZN3ruy9Allocator12AllocateSlowEl(%"class.ruy::Allocator"* %62, i64 %239) #6
  br label %250

250:                                              ; preds = %232, %244, %248
  %251 = phi i8* [ null, %232 ], [ %249, %248 ], [ %246, %244 ]
  %252 = bitcast i8* %251 to %"struct.ruy::(anonymous namespace)::TrMulTask"*
  %253 = bitcast i8* %233 to i32*
  store atomic i32 %171, i32* %253 seq_cst, align 4
  br i1 %173, label %254, label %257

254:                                              ; preds = %250
  %255 = zext i1 %172 to i8
  %256 = zext i32 %171 to i64
  br label %260

257:                                              ; preds = %260, %250
  %258 = call %"class.ruy::ThreadPool"* @_ZN3ruy3Ctx19mutable_thread_poolEv(%"class.ruy::Ctx"* %1) #6
  %259 = bitcast i8* %251 to %"struct.ruy::Task"*
  call void @_ZN3ruy10ThreadPool11ExecuteImplEiiPNS_4TaskE(%"class.ruy::ThreadPool"* %258, i32 %171, i32 88, %"struct.ruy::Task"* %259) #6
  call void @_ZN3ruy9Allocator7FreeAllEv(%"class.ruy::Allocator"* %62) #6
  call void @llvm.lifetime.end.p0i8(i64 16, i8* nonnull %175) #6
  call void @llvm.lifetime.end.p0i8(i64 52, i8* nonnull %153) #6
  br label %280

260:                                              ; preds = %260, %254
  %261 = phi i64 [ 0, %254 ], [ %278, %260 ]
  %262 = trunc i64 %261 to i32
  %263 = call %"class.ruy::Allocator"* @_ZNK3ruy3Ctx26GetThreadSpecificAllocatorEi(%"class.ruy::Ctx"* %1, i32 %262) #6
  %264 = call %"class.ruy::TuningResolver"* @_ZNK3ruy3Ctx31GetThreadSpecificTuningResolverEi(%"class.ruy::Ctx"* %1, i32 %262) #6
  %265 = getelementptr inbounds %"struct.ruy::(anonymous namespace)::TrMulTask", %"struct.ruy::(anonymous namespace)::TrMulTask"* %252, i64 %261, i32 0, i32 0
  store i32 (...)** bitcast (i8** getelementptr inbounds ({ [5 x i8*] }, { [5 x i8*] }* @_ZTVN3ruy12_GLOBAL__N_19TrMulTaskE, i64 0, inrange i32 0, i64 2) to i32 (...)**), i32 (...)*** %265, align 8
  %266 = getelementptr inbounds %"struct.ruy::(anonymous namespace)::TrMulTask", %"struct.ruy::(anonymous namespace)::TrMulTask"* %252, i64 %261, i32 1
  store %"struct.ruy::TrMulParams"* %0, %"struct.ruy::TrMulParams"** %266, align 8
  %267 = getelementptr inbounds %"struct.ruy::(anonymous namespace)::TrMulTask", %"struct.ruy::(anonymous namespace)::TrMulTask"* %252, i64 %261, i32 2
  store %"struct.ruy::BlockMap"* %5, %"struct.ruy::BlockMap"** %267, align 8
  %268 = getelementptr inbounds %"struct.ruy::(anonymous namespace)::TrMulTask", %"struct.ruy::(anonymous namespace)::TrMulTask"* %252, i64 %261, i32 3
  %269 = bitcast %"struct.std::__1::atomic.6"** %268 to i8**
  store i8* %233, i8** %269, align 8
  %270 = getelementptr inbounds %"struct.ruy::(anonymous namespace)::TrMulTask", %"struct.ruy::(anonymous namespace)::TrMulTask"* %252, i64 %261, i32 4
  store i32 %262, i32* %270, align 8
  %271 = getelementptr inbounds %"struct.ruy::(anonymous namespace)::TrMulTask", %"struct.ruy::(anonymous namespace)::TrMulTask"* %252, i64 %261, i32 5
  store i8 %255, i8* %271, align 4
  %272 = getelementptr inbounds %"struct.ruy::(anonymous namespace)::TrMulTask", %"struct.ruy::(anonymous namespace)::TrMulTask"* %252, i64 %261, i32 6
  %273 = bitcast %"class.ruy::SidePair.5"* %272 to i8*
  call void @llvm.memcpy.p0i8.p0i8.i64(i8* align 8 %273, i8* nonnull align 8 %175, i64 16, i1 false)
  %274 = getelementptr inbounds %"struct.ruy::(anonymous namespace)::TrMulTask", %"struct.ruy::(anonymous namespace)::TrMulTask"* %252, i64 %261, i32 7
  store %"class.ruy::TuningResolver"* %264, %"class.ruy::TuningResolver"** %274, align 8
  %275 = getelementptr inbounds %"struct.ruy::(anonymous namespace)::TrMulTask", %"struct.ruy::(anonymous namespace)::TrMulTask"* %252, i64 %261, i32 8
  store %"class.ruy::Allocator"* %263, %"class.ruy::Allocator"** %275, align 8
  %276 = getelementptr inbounds %"struct.ruy::(anonymous namespace)::TrMulTask", %"struct.ruy::(anonymous namespace)::TrMulTask"* %252, i64 %261, i32 9
  %277 = bitcast %"class.ruy::SidePair.11"* %276 to i8*
  call void @llvm.memset.p0i8.i64(i8* align 8 %277, i8 0, i64 16, i1 false) #6
  %278 = add nuw nsw i64 %261, 1
  %279 = icmp eq i64 %278, %256
  br i1 %279, label %257, label %260

280:                                              ; preds = %257, %286
  ret void

281:                                              ; preds = %149
  %282 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %0, i64 0, i32 1, i32 0, i64 1
  %283 = load void (i32, %"struct.ruy::EMat"*, %"struct.ruy::PEMat"*, i32, i32)*, void (i32, %"struct.ruy::EMat"*, %"struct.ruy::PEMat"*, i32, i32)** %282, align 8
  %284 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %0, i64 0, i32 3, i32 0, i64 1
  %285 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %0, i64 0, i32 5, i32 0, i64 1
  tail call void %283(i32 %131, %"struct.ruy::EMat"* dereferenceable(40) %284, %"struct.ruy::PEMat"* %285, i32 0, i32 %141) #6
  br label %286

286:                                              ; preds = %281, %149
  %287 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %0, i64 0, i32 2
  %288 = load void (i32, %"class.ruy::SidePair.0"*, i8*, %"class.ruy::SidePair.1"*, %"class.ruy::SidePair.1"*, %"struct.ruy::EMat"*)*, void (i32, %"class.ruy::SidePair.0"*, i8*, %"class.ruy::SidePair.1"*, %"class.ruy::SidePair.1"*, %"struct.ruy::EMat"*)** %287, align 8
  %289 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %0, i64 0, i32 7
  %290 = load i8*, i8** %289, align 8
  %291 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %0, i64 0, i32 4
  call void %288(i32 %131, %"class.ruy::SidePair.0"* dereferenceable(112) %8, i8* %290, %"class.ruy::SidePair.1"* nonnull dereferenceable(8) %3, %"class.ruy::SidePair.1"* nonnull dereferenceable(8) %4, %"struct.ruy::EMat"* %291) #6
  call void @_ZN3ruy9Allocator7FreeAllEv(%"class.ruy::Allocator"* %62) #6
  call void @llvm.lifetime.end.p0i8(i64 8, i8* nonnull %135) #6
  call void @llvm.lifetime.end.p0i8(i64 8, i8* nonnull %132) #6
  br label %280

292:                                              ; preds = %218
  %293 = load i32, i32* %179, align 4
  %294 = getelementptr inbounds %"struct.ruy::BlockMap", %"struct.ruy::BlockMap"* %5, i64 0, i32 4, i32 0, i64 1
  %295 = load i32, i32* %294, align 4
  %296 = add nsw i32 %295, %293
  %297 = shl i32 1, %296
  %298 = sext i32 %297 to i64
  %299 = add nsw i64 %298, 63
  %300 = and i64 %299, -64
  %301 = load i64, i64* %63, align 8
  %302 = add nsw i64 %300, %301
  %303 = load i64, i64* %64, align 8
  %304 = icmp sgt i64 %302, %303
  br i1 %304, label %309, label %305

305:                                              ; preds = %292
  %306 = load i8*, i8** %65, align 8
  %307 = getelementptr inbounds i8, i8* %306, i64 %301
  store i64 %302, i64* %63, align 8
  %308 = icmp eq i8* %307, null
  br i1 %308, label %309, label %311

309:                                              ; preds = %305, %292
  %310 = call i8* @_ZN3ruy9Allocator12AllocateSlowEl(%"class.ruy::Allocator"* %62, i64 %300) #6
  br label %311

311:                                              ; preds = %309, %305
  %312 = phi i8* [ %310, %309 ], [ %307, %305 ]
  %313 = bitcast %"struct.std::__1::atomic"** %176 to i8**
  store i8* %312, i8** %313, align 8
  %314 = icmp eq i32 %296, 31
  %315 = bitcast i8* %312 to %"struct.std::__1::atomic"*
  br i1 %314, label %221, label %316

316:                                              ; preds = %311, %316
  %317 = phi i64 [ %319, %316 ], [ 0, %311 ]
  %318 = getelementptr inbounds %"struct.std::__1::atomic", %"struct.std::__1::atomic"* %315, i64 %317, i32 0, i32 0, i32 0, i32 0
  store atomic i8 0, i8* %318 monotonic, align 1
  %319 = add nuw nsw i64 %317, 1
  %320 = icmp slt i64 %319, %298
  br i1 %320, label %316, label %221

321:                                              ; preds = %126
  %322 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %0, i64 0, i32 5, i32 0, i64 1, i32 6, i32 3
  %323 = load i8, i8* %322, align 4
  %324 = icmp eq i8 %323, 0
  %325 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %0, i64 0, i32 5, i32 0, i64 1, i32 6, i32 1
  %326 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %0, i64 0, i32 5, i32 0, i64 1, i32 6, i32 0
  %327 = load i32, i32* %325, align 4
  %328 = load i32, i32* %326, align 4
  %329 = select i1 %324, i32 %327, i32 %328
  %330 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %0, i64 0, i32 5, i32 0, i64 1, i32 6, i32 2
  %331 = load i32, i32* %330, align 4
  %332 = mul nsw i32 %331, %329
  %333 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %0, i64 0, i32 5, i32 0, i64 1, i32 0, i32 2
  %334 = load i8, i8* %333, align 2
  %335 = zext i8 %334 to i32
  %336 = mul nsw i32 %332, %335
  %337 = icmp eq i32 %336, 0
  br i1 %337, label %352, label %338

338:                                              ; preds = %321
  %339 = sext i32 %336 to i64
  %340 = add nsw i64 %339, 63
  %341 = and i64 %340, -64
  %342 = load i64, i64* %63, align 8
  %343 = add nsw i64 %342, %341
  %344 = load i64, i64* %64, align 8
  %345 = icmp sgt i64 %343, %344
  br i1 %345, label %350, label %346

346:                                              ; preds = %338
  %347 = load i8*, i8** %65, align 8
  %348 = getelementptr inbounds i8, i8* %347, i64 %342
  store i64 %343, i64* %63, align 8
  %349 = icmp eq i8* %348, null
  br i1 %349, label %350, label %352

350:                                              ; preds = %346, %338
  %351 = tail call i8* @_ZN3ruy9Allocator12AllocateSlowEl(%"class.ruy::Allocator"* %62, i64 %341) #6
  br label %352

352:                                              ; preds = %350, %346, %321
  %353 = phi i8* [ null, %321 ], [ %351, %350 ], [ %348, %346 ]
  %354 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %0, i64 0, i32 5, i32 0, i64 1, i32 2
  store i8* %353, i8** %354, align 8
  %355 = load i32, i32* %325, align 4
  %356 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %0, i64 0, i32 5, i32 0, i64 1, i32 3, i32 2
  %357 = load i8, i8* %356, align 2
  %358 = zext i8 %357 to i32
  %359 = mul nsw i32 %355, %358
  %360 = icmp eq i32 %359, 0
  br i1 %360, label %375, label %361

361:                                              ; preds = %352
  %362 = sext i32 %359 to i64
  %363 = add nsw i64 %362, 63
  %364 = and i64 %363, -64
  %365 = load i64, i64* %63, align 8
  %366 = add nsw i64 %365, %364
  %367 = load i64, i64* %64, align 8
  %368 = icmp sgt i64 %366, %367
  br i1 %368, label %373, label %369

369:                                              ; preds = %361
  %370 = load i8*, i8** %65, align 8
  %371 = getelementptr inbounds i8, i8* %370, i64 %365
  store i64 %366, i64* %63, align 8
  %372 = icmp eq i8* %371, null
  br i1 %372, label %373, label %375

373:                                              ; preds = %369, %361
  %374 = tail call i8* @_ZN3ruy9Allocator12AllocateSlowEl(%"class.ruy::Allocator"* %62, i64 %364) #6
  br label %375

375:                                              ; preds = %373, %369, %352
  %376 = phi i8* [ null, %352 ], [ %374, %373 ], [ %371, %369 ]
  %377 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %0, i64 0, i32 5, i32 0, i64 1, i32 5
  store i8* %376, i8** %377, align 8
  br label %378

378:                                              ; preds = %375, %126
  %379 = icmp eq i32 %61, 1
  br i1 %379, label %130, label %152
}

; Function Attrs: argmemonly nounwind
declare void @llvm.lifetime.start.p0i8(i64 immarg, i8* nocapture) #1

declare i32 @_ZNK3ruy3Ctx15max_num_threadsEv(%"class.ruy::Ctx"*) local_unnamed_addr #2

declare %"class.ruy::CpuInfo"* @_ZN3ruy3Ctx15mutable_cpuinfoEv(%"class.ruy::Ctx"*) local_unnamed_addr #2

declare dereferenceable(8) %"struct.ruy::CpuCacheParams"* @_ZN3ruy7CpuInfo11CacheParamsEv(%"class.ruy::CpuInfo"*) local_unnamed_addr #2

declare %"class.ruy::Allocator"* @_ZN3ruy3Ctx16GetMainAllocatorEv(%"class.ruy::Ctx"*) local_unnamed_addr #2

; Function Attrs: argmemonly nounwind
declare void @llvm.lifetime.end.p0i8(i64 immarg, i8* nocapture) #1

declare i32 @_ZN3ruy3Ctx19GetMainThreadTuningEv(%"class.ruy::Ctx"*) local_unnamed_addr #2

declare void @_ZN3ruy9Allocator7FreeAllEv(%"class.ruy::Allocator"*) local_unnamed_addr #2

; Function Attrs: argmemonly nounwind
declare void @llvm.memset.p0i8.i64(i8* nocapture writeonly, i8, i64, i1 immarg) #1

declare void @_ZN3ruy12MakeBlockMapEiiiiiiiiRKNS_14CpuCacheParamsEPNS_8BlockMapE(i32, i32, i32, i32, i32, i32, i32, i32, %"struct.ruy::CpuCacheParams"* dereferenceable(8), %"struct.ruy::BlockMap"*) local_unnamed_addr #2

declare void @_ZN3ruy3Ctx29EnsureThreadSpecificResourcesEi(%"class.ruy::Ctx"*, i32) local_unnamed_addr #2

declare %"class.ruy::TuningResolver"* @_ZNK3ruy3Ctx31GetThreadSpecificTuningResolverEi(%"class.ruy::Ctx"*, i32) local_unnamed_addr #2

declare i32 @_ZNK3ruy3Ctx15explicit_tuningEv(%"class.ruy::Ctx"*) local_unnamed_addr #2

declare %"class.ruy::Allocator"* @_ZNK3ruy3Ctx26GetThreadSpecificAllocatorEi(%"class.ruy::Ctx"*, i32) local_unnamed_addr #2

; Function Attrs: argmemonly nounwind
declare void @llvm.memcpy.p0i8.p0i8.i64(i8* nocapture writeonly, i8* nocapture readonly, i64, i1 immarg) #1

declare %"class.ruy::ThreadPool"* @_ZN3ruy3Ctx19mutable_thread_poolEv(%"class.ruy::Ctx"*) local_unnamed_addr #2

; Function Attrs: nounwind ssp uwtable
define linkonce_odr hidden void @_ZN3ruy4TaskD2Ev(%"struct.ruy::Task"*) unnamed_addr #0 comdat align 2 {
  ret void
}

; Function Attrs: nounwind readnone speculatable
declare i32 @llvm.ctlz.i32(i32, i1 immarg) #3

declare i32 @_ZN3ruy17GetTraversalOrderEiiiiiRKNS_14CpuCacheParamsE(i32, i32, i32, i32, i32, %"struct.ruy::CpuCacheParams"* dereferenceable(8)) local_unnamed_addr #2

declare i8* @_ZN3ruy9Allocator12AllocateSlowEl(%"class.ruy::Allocator"*, i64) local_unnamed_addr #2

; Function Attrs: inlinehint nounwind ssp uwtable
define internal void @_ZN3ruy12_GLOBAL__N_19TrMulTaskD0Ev(%"struct.ruy::(anonymous namespace)::TrMulTask"*) unnamed_addr #4 align 2 {
  %2 = bitcast %"struct.ruy::(anonymous namespace)::TrMulTask"* %0 to i8*
  tail call void @_ZdlPv(i8* %2) #7
  ret void
}

; Function Attrs: nounwind ssp uwtable
define internal void @_ZN3ruy12_GLOBAL__N_19TrMulTask3RunEv(%"struct.ruy::(anonymous namespace)::TrMulTask"* nocapture) unnamed_addr #0 align 2 {
  %2 = alloca %"class.ruy::SidePair.1", align 4
  %3 = alloca i32, align 4
  %4 = alloca i32, align 4
  %5 = alloca %"class.ruy::SidePair.1", align 4
  %6 = alloca %"class.ruy::SidePair.1", align 4
  %7 = alloca %"class.ruy::SidePair.1", align 4
  %8 = getelementptr inbounds %"struct.ruy::(anonymous namespace)::TrMulTask", %"struct.ruy::(anonymous namespace)::TrMulTask"* %0, i64 0, i32 1
  %9 = getelementptr inbounds %"struct.ruy::(anonymous namespace)::TrMulTask", %"struct.ruy::(anonymous namespace)::TrMulTask"* %0, i64 0, i32 2
  %10 = getelementptr inbounds %"struct.ruy::(anonymous namespace)::TrMulTask", %"struct.ruy::(anonymous namespace)::TrMulTask"* %0, i64 0, i32 8
  %11 = load %"struct.ruy::TrMulParams"*, %"struct.ruy::TrMulParams"** %8, align 8
  %12 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %11, i64 0, i32 6, i32 0, i64 0
  %13 = load i8, i8* %12, align 1, !range !3
  %14 = icmp eq i8 %13, 0
  br i1 %14, label %37, label %66

15:                                               ; preds = %261
  %16 = getelementptr inbounds %"struct.ruy::(anonymous namespace)::TrMulTask", %"struct.ruy::(anonymous namespace)::TrMulTask"* %0, i64 0, i32 3
  %17 = bitcast %"struct.std::__1::atomic.6"** %16 to %"struct.std::__1::__atomic_base.7"**
  %18 = bitcast %"class.ruy::SidePair.1"* %5 to i8*
  %19 = getelementptr inbounds %"class.ruy::SidePair.1", %"class.ruy::SidePair.1"* %5, i64 0, i32 0, i64 0
  %20 = getelementptr inbounds %"class.ruy::SidePair.1", %"class.ruy::SidePair.1"* %5, i64 0, i32 0, i64 1
  %21 = bitcast %"class.ruy::SidePair.1"* %6 to i8*
  %22 = getelementptr inbounds %"class.ruy::SidePair.1", %"class.ruy::SidePair.1"* %6, i64 0, i32 0, i64 0
  %23 = getelementptr inbounds %"class.ruy::SidePair.1", %"class.ruy::SidePair.1"* %6, i64 0, i32 0, i64 1
  %24 = bitcast %"class.ruy::SidePair.1"* %7 to i8*
  %25 = getelementptr inbounds %"class.ruy::SidePair.1", %"class.ruy::SidePair.1"* %7, i64 0, i32 0, i64 0
  %26 = getelementptr inbounds %"class.ruy::SidePair.1", %"class.ruy::SidePair.1"* %7, i64 0, i32 0, i64 1
  %27 = bitcast %"class.ruy::SidePair.1"* %2 to i8*
  %28 = getelementptr inbounds %"class.ruy::SidePair.1", %"class.ruy::SidePair.1"* %2, i64 0, i32 0, i64 0
  %29 = getelementptr inbounds %"class.ruy::SidePair.1", %"class.ruy::SidePair.1"* %2, i64 0, i32 0, i64 1
  %30 = getelementptr inbounds %"struct.ruy::(anonymous namespace)::TrMulTask", %"struct.ruy::(anonymous namespace)::TrMulTask"* %0, i64 0, i32 5
  %31 = bitcast i32* %3 to i8*
  %32 = bitcast i32* %4 to i8*
  %33 = getelementptr inbounds %"struct.ruy::(anonymous namespace)::TrMulTask", %"struct.ruy::(anonymous namespace)::TrMulTask"* %0, i64 0, i32 9, i32 0, i64 0
  %34 = getelementptr inbounds %"struct.ruy::(anonymous namespace)::TrMulTask", %"struct.ruy::(anonymous namespace)::TrMulTask"* %0, i64 0, i32 6, i32 0, i64 0
  %35 = getelementptr inbounds %"struct.ruy::(anonymous namespace)::TrMulTask", %"struct.ruy::(anonymous namespace)::TrMulTask"* %0, i64 0, i32 9, i32 0, i64 1
  %36 = getelementptr inbounds %"struct.ruy::(anonymous namespace)::TrMulTask", %"struct.ruy::(anonymous namespace)::TrMulTask"* %0, i64 0, i32 6, i32 0, i64 1
  br label %71

37:                                               ; preds = %1
  %38 = load %"struct.ruy::BlockMap"*, %"struct.ruy::BlockMap"** %9, align 8
  %39 = getelementptr inbounds %"struct.ruy::BlockMap", %"struct.ruy::BlockMap"* %38, i64 0, i32 3
  %40 = load i32, i32* %39, align 4
  %41 = getelementptr inbounds %"struct.ruy::BlockMap", %"struct.ruy::BlockMap"* %38, i64 0, i32 4, i32 0, i64 0
  %42 = load i32, i32* %41, align 4
  %43 = add nsw i32 %42, %40
  %44 = shl i32 1, %43
  %45 = load %"class.ruy::Allocator"*, %"class.ruy::Allocator"** %10, align 8
  %46 = sext i32 %44 to i64
  %47 = getelementptr inbounds %"struct.ruy::(anonymous namespace)::TrMulTask", %"struct.ruy::(anonymous namespace)::TrMulTask"* %0, i64 0, i32 9, i32 0, i64 0
  %48 = add nsw i64 %46, 63
  %49 = and i64 %48, -64
  %50 = getelementptr inbounds %"class.ruy::Allocator", %"class.ruy::Allocator"* %45, i64 0, i32 1
  %51 = load i64, i64* %50, align 8
  %52 = add nsw i64 %49, %51
  %53 = getelementptr inbounds %"class.ruy::Allocator", %"class.ruy::Allocator"* %45, i64 0, i32 2
  %54 = load i64, i64* %53, align 8
  %55 = icmp sgt i64 %52, %54
  br i1 %55, label %61, label %56

56:                                               ; preds = %37
  %57 = getelementptr inbounds %"class.ruy::Allocator", %"class.ruy::Allocator"* %45, i64 0, i32 0
  %58 = load i8*, i8** %57, align 8
  %59 = getelementptr inbounds i8, i8* %58, i64 %51
  store i64 %52, i64* %50, align 8
  %60 = icmp eq i8* %59, null
  br i1 %60, label %61, label %63

61:                                               ; preds = %56, %37
  %62 = tail call i8* @_ZN3ruy9Allocator12AllocateSlowEl(%"class.ruy::Allocator"* %45, i64 %49) #6
  br label %63

63:                                               ; preds = %56, %61
  %64 = phi i8* [ %62, %61 ], [ %59, %56 ]
  store i8* %64, i8** %47, align 8
  tail call void @llvm.memset.p0i8.i64(i8* align 1 %64, i8 0, i64 %46, i1 false)
  %65 = load %"struct.ruy::TrMulParams"*, %"struct.ruy::TrMulParams"** %8, align 8
  br label %66

66:                                               ; preds = %1, %63
  %67 = phi %"struct.ruy::TrMulParams"* [ %11, %1 ], [ %65, %63 ]
  %68 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %67, i64 0, i32 6, i32 0, i64 1
  %69 = load i8, i8* %68, align 1, !range !3
  %70 = icmp eq i8 %69, 0
  br i1 %70, label %233, label %261

71:                                               ; preds = %15, %222
  %72 = phi i32 [ %277, %15 ], [ %75, %222 ]
  %73 = load %"struct.std::__1::__atomic_base.7"*, %"struct.std::__1::__atomic_base.7"** %17, align 8
  %74 = getelementptr inbounds %"struct.std::__1::__atomic_base.7", %"struct.std::__1::__atomic_base.7"* %73, i64 0, i32 0, i32 0, i32 0, i32 0
  %75 = atomicrmw add i32* %74, i32 1 monotonic
  call void @llvm.lifetime.start.p0i8(i64 8, i8* nonnull %18) #6
  store i32 -1431655766, i32* %19, align 4
  store i32 -1431655766, i32* %20, align 4
  %76 = load %"struct.ruy::BlockMap"*, %"struct.ruy::BlockMap"** %9, align 8
  call void @_ZN3ruy15GetBlockByIndexERKNS_8BlockMapEiPNS_8SidePairIiEE(%"struct.ruy::BlockMap"* dereferenceable(52) %76, i32 %72, %"class.ruy::SidePair.1"* nonnull %5) #6
  call void @llvm.lifetime.start.p0i8(i64 8, i8* nonnull %21) #6
  store i32 -1431655766, i32* %22, align 4
  store i32 -1431655766, i32* %23, align 4
  call void @llvm.lifetime.start.p0i8(i64 8, i8* nonnull %24) #6
  store i32 -1431655766, i32* %25, align 4
  store i32 -1431655766, i32* %26, align 4
  %77 = load %"struct.ruy::BlockMap"*, %"struct.ruy::BlockMap"** %9, align 8
  call void @_ZN3ruy20GetBlockMatrixCoordsERKNS_8BlockMapERKNS_8SidePairIiEEPS4_S7_(%"struct.ruy::BlockMap"* dereferenceable(52) %77, %"class.ruy::SidePair.1"* nonnull dereferenceable(8) %5, %"class.ruy::SidePair.1"* nonnull %6, %"class.ruy::SidePair.1"* nonnull %7) #6
  call void @llvm.lifetime.start.p0i8(i64 8, i8* nonnull %27) #6
  %78 = load i32, i32* %19, align 4
  %79 = add nsw i32 %78, 1
  %80 = load i32, i32* %20, align 4
  %81 = add nsw i32 %80, 1
  store i32 %79, i32* %28, align 4
  store i32 %81, i32* %29, align 4
  br label %82

82:                                               ; preds = %185, %71
  %83 = phi i32 [ 0, %71 ], [ %134, %185 ]
  %84 = load i32, i32* %22, align 4
  %85 = load i32, i32* %25, align 4
  %86 = load %"struct.ruy::TrMulParams"*, %"struct.ruy::TrMulParams"** %8, align 8
  %87 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %86, i64 0, i32 6, i32 0, i64 0
  %88 = load i8, i8* %87, align 1, !range !3
  %89 = icmp eq i8 %88, 0
  br i1 %89, label %90, label %122

90:                                               ; preds = %82
  %91 = load i32, i32* %19, align 4
  %92 = load i8*, i8** %33, align 8
  %93 = sext i32 %91 to i64
  %94 = getelementptr inbounds i8, i8* %92, i64 %93
  %95 = load i8, i8* %94, align 1, !range !3
  %96 = icmp eq i8 %95, 0
  br i1 %96, label %97, label %122

97:                                               ; preds = %90
  %98 = load i8, i8* %30, align 4, !range !3
  %99 = icmp eq i8 %98, 0
  br i1 %99, label %114, label %100

100:                                              ; preds = %97
  %101 = load %"struct.std::__1::atomic"*, %"struct.std::__1::atomic"** %34, align 8
  %102 = getelementptr inbounds %"struct.std::__1::atomic", %"struct.std::__1::atomic"* %101, i64 %93, i32 0, i32 0, i32 0, i32 0
  %103 = cmpxchg i8* %102, i8 0, i8 1 acq_rel acquire
  %104 = extractvalue { i8, i1 } %103, 1
  br i1 %104, label %105, label %111

105:                                              ; preds = %100
  %106 = load %"struct.ruy::TrMulParams"*, %"struct.ruy::TrMulParams"** %8, align 8
  %107 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %106, i64 0, i32 1, i32 0, i64 0
  %108 = load void (i32, %"struct.ruy::EMat"*, %"struct.ruy::PEMat"*, i32, i32)*, void (i32, %"struct.ruy::EMat"*, %"struct.ruy::PEMat"*, i32, i32)** %107, align 8
  %109 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %106, i64 0, i32 3, i32 0, i64 0
  %110 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %106, i64 0, i32 5, i32 0, i64 0
  call void %108(i32 %264, %"struct.ruy::EMat"* dereferenceable(40) %109, %"struct.ruy::PEMat"* %110, i32 %84, i32 %85) #6
  store atomic i8 2, i8* %102 release, align 1
  br label %119

111:                                              ; preds = %100
  %112 = extractvalue { i8, i1 } %103, 0
  %113 = icmp eq i8 %112, 1
  br i1 %113, label %122, label %119

114:                                              ; preds = %97
  %115 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %86, i64 0, i32 1, i32 0, i64 0
  %116 = load void (i32, %"struct.ruy::EMat"*, %"struct.ruy::PEMat"*, i32, i32)*, void (i32, %"struct.ruy::EMat"*, %"struct.ruy::PEMat"*, i32, i32)** %115, align 8
  %117 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %86, i64 0, i32 3, i32 0, i64 0
  %118 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %86, i64 0, i32 5, i32 0, i64 0
  call void %116(i32 %264, %"struct.ruy::EMat"* dereferenceable(40) %117, %"struct.ruy::PEMat"* %118, i32 %84, i32 %85) #6
  br label %119

119:                                              ; preds = %114, %111, %105
  %120 = load i8*, i8** %33, align 8
  %121 = getelementptr inbounds i8, i8* %120, i64 %93
  store i8 1, i8* %121, align 1
  br label %122

122:                                              ; preds = %119, %111, %90, %82
  %123 = phi i8 [ 1, %82 ], [ 1, %90 ], [ 1, %119 ], [ 0, %111 ]
  %124 = load i32, i32* %23, align 4
  %125 = load i32, i32* %26, align 4
  %126 = load %"struct.ruy::TrMulParams"*, %"struct.ruy::TrMulParams"** %8, align 8
  %127 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %126, i64 0, i32 6, i32 0, i64 1
  %128 = load i8, i8* %127, align 1, !range !3
  %129 = icmp eq i8 %128, 0
  br i1 %129, label %186, label %218

130:                                              ; preds = %218
  %131 = zext i32 %83 to i64
  %132 = getelementptr inbounds %"class.ruy::SidePair.1", %"class.ruy::SidePair.1"* %2, i64 0, i32 0, i64 %131
  %133 = load i32, i32* %132, align 4
  %134 = xor i32 %83, 1
  %135 = load %"struct.ruy::BlockMap"*, %"struct.ruy::BlockMap"** %9, align 8
  %136 = getelementptr inbounds %"struct.ruy::BlockMap", %"struct.ruy::BlockMap"* %135, i64 0, i32 3
  %137 = load i32, i32* %136, align 4
  %138 = getelementptr inbounds %"struct.ruy::BlockMap", %"struct.ruy::BlockMap"* %135, i64 0, i32 4, i32 0, i64 %131
  %139 = load i32, i32* %138, align 4
  %140 = add nsw i32 %139, %137
  %141 = shl i32 1, %140
  %142 = icmp slt i32 %133, %141
  br i1 %142, label %143, label %185

143:                                              ; preds = %130
  call void @llvm.lifetime.start.p0i8(i64 4, i8* nonnull %31) #6
  store i32 -1431655766, i32* %3, align 4
  call void @llvm.lifetime.start.p0i8(i64 4, i8* nonnull %32) #6
  store i32 -1431655766, i32* %4, align 4
  call void @_ZN3ruy20GetBlockMatrixCoordsENS_4SideERKNS_8BlockMapEiPiS4_(i32 %83, %"struct.ruy::BlockMap"* dereferenceable(52) %135, i32 %133, i32* nonnull %3, i32* nonnull %4) #6
  %144 = load i32, i32* %3, align 4
  %145 = load i32, i32* %4, align 4
  %146 = load %"struct.ruy::TrMulParams"*, %"struct.ruy::TrMulParams"** %8, align 8
  %147 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %146, i64 0, i32 6, i32 0, i64 %131
  %148 = load i8, i8* %147, align 1, !range !3
  %149 = icmp eq i8 %148, 0
  br i1 %149, label %150, label %183

150:                                              ; preds = %143
  %151 = getelementptr inbounds %"struct.ruy::(anonymous namespace)::TrMulTask", %"struct.ruy::(anonymous namespace)::TrMulTask"* %0, i64 0, i32 9, i32 0, i64 %131
  %152 = load i8*, i8** %151, align 8
  %153 = sext i32 %133 to i64
  %154 = getelementptr inbounds i8, i8* %152, i64 %153
  %155 = load i8, i8* %154, align 1, !range !3
  %156 = icmp eq i8 %155, 0
  br i1 %156, label %157, label %183

157:                                              ; preds = %150
  %158 = load i8, i8* %30, align 4, !range !3
  %159 = icmp eq i8 %158, 0
  br i1 %159, label %175, label %160

160:                                              ; preds = %157
  %161 = getelementptr inbounds %"struct.ruy::(anonymous namespace)::TrMulTask", %"struct.ruy::(anonymous namespace)::TrMulTask"* %0, i64 0, i32 6, i32 0, i64 %131
  %162 = load %"struct.std::__1::atomic"*, %"struct.std::__1::atomic"** %161, align 8
  %163 = getelementptr inbounds %"struct.std::__1::atomic", %"struct.std::__1::atomic"* %162, i64 %153, i32 0, i32 0, i32 0, i32 0
  %164 = cmpxchg i8* %163, i8 0, i8 1 acq_rel acquire
  %165 = extractvalue { i8, i1 } %164, 1
  br i1 %165, label %166, label %172

166:                                              ; preds = %160
  %167 = load %"struct.ruy::TrMulParams"*, %"struct.ruy::TrMulParams"** %8, align 8
  %168 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %167, i64 0, i32 1, i32 0, i64 %131
  %169 = load void (i32, %"struct.ruy::EMat"*, %"struct.ruy::PEMat"*, i32, i32)*, void (i32, %"struct.ruy::EMat"*, %"struct.ruy::PEMat"*, i32, i32)** %168, align 8
  %170 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %167, i64 0, i32 3, i32 0, i64 %131
  %171 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %167, i64 0, i32 5, i32 0, i64 %131
  call void %169(i32 %264, %"struct.ruy::EMat"* dereferenceable(40) %170, %"struct.ruy::PEMat"* %171, i32 %144, i32 %145) #6
  store atomic i8 2, i8* %163 release, align 1
  br label %180

172:                                              ; preds = %160
  %173 = extractvalue { i8, i1 } %164, 0
  %174 = icmp eq i8 %173, 1
  br i1 %174, label %183, label %180

175:                                              ; preds = %157
  %176 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %146, i64 0, i32 1, i32 0, i64 %131
  %177 = load void (i32, %"struct.ruy::EMat"*, %"struct.ruy::PEMat"*, i32, i32)*, void (i32, %"struct.ruy::EMat"*, %"struct.ruy::PEMat"*, i32, i32)** %176, align 8
  %178 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %146, i64 0, i32 3, i32 0, i64 %131
  %179 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %146, i64 0, i32 5, i32 0, i64 %131
  call void %177(i32 %264, %"struct.ruy::EMat"* dereferenceable(40) %178, %"struct.ruy::PEMat"* %179, i32 %144, i32 %145) #6
  br label %180

180:                                              ; preds = %175, %172, %166
  %181 = load i8*, i8** %151, align 8
  %182 = getelementptr inbounds i8, i8* %181, i64 %153
  store i8 1, i8* %182, align 1
  br label %183

183:                                              ; preds = %180, %172, %150, %143
  %184 = add nsw i32 %133, 1
  store i32 %184, i32* %132, align 4
  call void @llvm.lifetime.end.p0i8(i64 4, i8* nonnull %32) #6
  call void @llvm.lifetime.end.p0i8(i64 4, i8* nonnull %31) #6
  br label %185

185:                                              ; preds = %183, %130
  br label %82

186:                                              ; preds = %122
  %187 = load i32, i32* %20, align 4
  %188 = load i8*, i8** %35, align 8
  %189 = sext i32 %187 to i64
  %190 = getelementptr inbounds i8, i8* %188, i64 %189
  %191 = load i8, i8* %190, align 1, !range !3
  %192 = icmp eq i8 %191, 0
  br i1 %192, label %193, label %218

193:                                              ; preds = %186
  %194 = load i8, i8* %30, align 4, !range !3
  %195 = icmp eq i8 %194, 0
  br i1 %195, label %210, label %196

196:                                              ; preds = %193
  %197 = load %"struct.std::__1::atomic"*, %"struct.std::__1::atomic"** %36, align 8
  %198 = getelementptr inbounds %"struct.std::__1::atomic", %"struct.std::__1::atomic"* %197, i64 %189, i32 0, i32 0, i32 0, i32 0
  %199 = cmpxchg i8* %198, i8 0, i8 1 acq_rel acquire
  %200 = extractvalue { i8, i1 } %199, 1
  br i1 %200, label %204, label %201

201:                                              ; preds = %196
  %202 = extractvalue { i8, i1 } %199, 0
  %203 = icmp eq i8 %202, 1
  br i1 %203, label %218, label %215

204:                                              ; preds = %196
  %205 = load %"struct.ruy::TrMulParams"*, %"struct.ruy::TrMulParams"** %8, align 8
  %206 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %205, i64 0, i32 1, i32 0, i64 1
  %207 = load void (i32, %"struct.ruy::EMat"*, %"struct.ruy::PEMat"*, i32, i32)*, void (i32, %"struct.ruy::EMat"*, %"struct.ruy::PEMat"*, i32, i32)** %206, align 8
  %208 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %205, i64 0, i32 3, i32 0, i64 1
  %209 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %205, i64 0, i32 5, i32 0, i64 1
  call void %207(i32 %264, %"struct.ruy::EMat"* dereferenceable(40) %208, %"struct.ruy::PEMat"* %209, i32 %124, i32 %125) #6
  store atomic i8 2, i8* %198 release, align 1
  br label %215

210:                                              ; preds = %193
  %211 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %126, i64 0, i32 1, i32 0, i64 1
  %212 = load void (i32, %"struct.ruy::EMat"*, %"struct.ruy::PEMat"*, i32, i32)*, void (i32, %"struct.ruy::EMat"*, %"struct.ruy::PEMat"*, i32, i32)** %211, align 8
  %213 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %126, i64 0, i32 3, i32 0, i64 1
  %214 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %126, i64 0, i32 5, i32 0, i64 1
  call void %212(i32 %264, %"struct.ruy::EMat"* dereferenceable(40) %213, %"struct.ruy::PEMat"* %214, i32 %124, i32 %125) #6
  br label %215

215:                                              ; preds = %210, %204, %201
  %216 = load i8*, i8** %35, align 8
  %217 = getelementptr inbounds i8, i8* %216, i64 %189
  store i8 1, i8* %217, align 1
  br label %218

218:                                              ; preds = %215, %201, %186, %122
  %219 = phi i8 [ 1, %122 ], [ 1, %186 ], [ 1, %215 ], [ 0, %201 ]
  %220 = and i8 %219, %123
  %221 = icmp eq i8 %220, 0
  br i1 %221, label %130, label %222

222:                                              ; preds = %218
  call void @llvm.lifetime.end.p0i8(i64 8, i8* nonnull %27) #6
  %223 = load %"struct.ruy::TrMulParams"*, %"struct.ruy::TrMulParams"** %8, align 8
  %224 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %223, i64 0, i32 2
  %225 = load void (i32, %"class.ruy::SidePair.0"*, i8*, %"class.ruy::SidePair.1"*, %"class.ruy::SidePair.1"*, %"struct.ruy::EMat"*)*, void (i32, %"class.ruy::SidePair.0"*, i8*, %"class.ruy::SidePair.1"*, %"class.ruy::SidePair.1"*, %"struct.ruy::EMat"*)** %224, align 8
  %226 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %223, i64 0, i32 5
  %227 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %223, i64 0, i32 7
  %228 = load i8*, i8** %227, align 8
  %229 = getelementptr inbounds %"struct.ruy::TrMulParams", %"struct.ruy::TrMulParams"* %223, i64 0, i32 4
  call void %225(i32 %264, %"class.ruy::SidePair.0"* dereferenceable(112) %226, i8* %228, %"class.ruy::SidePair.1"* nonnull dereferenceable(8) %6, %"class.ruy::SidePair.1"* nonnull dereferenceable(8) %7, %"struct.ruy::EMat"* %229) #6
  call void @llvm.lifetime.end.p0i8(i64 8, i8* nonnull %24) #6
  call void @llvm.lifetime.end.p0i8(i64 8, i8* nonnull %21) #6
  call void @llvm.lifetime.end.p0i8(i64 8, i8* nonnull %18) #6
  %230 = icmp slt i32 %75, %275
  br i1 %230, label %71, label %231

231:                                              ; preds = %222, %261
  %232 = load %"class.ruy::Allocator"*, %"class.ruy::Allocator"** %10, align 8
  call void @_ZN3ruy9Allocator7FreeAllEv(%"class.ruy::Allocator"* %232) #6
  ret void

233:                                              ; preds = %66
  %234 = load %"struct.ruy::BlockMap"*, %"struct.ruy::BlockMap"** %9, align 8
  %235 = getelementptr inbounds %"struct.ruy::BlockMap", %"struct.ruy::BlockMap"* %234, i64 0, i32 3
  %236 = load i32, i32* %235, align 4
  %237 = getelementptr inbounds %"struct.ruy::BlockMap", %"struct.ruy::BlockMap"* %234, i64 0, i32 4, i32 0, i64 1
  %238 = load i32, i32* %237, align 4
  %239 = add nsw i32 %238, %236
  %240 = shl i32 1, %239
  %241 = load %"class.ruy::Allocator"*, %"class.ruy::Allocator"** %10, align 8
  %242 = sext i32 %240 to i64
  %243 = getelementptr inbounds %"struct.ruy::(anonymous namespace)::TrMulTask", %"struct.ruy::(anonymous namespace)::TrMulTask"* %0, i64 0, i32 9, i32 0, i64 1
  %244 = add nsw i64 %242, 63
  %245 = and i64 %244, -64
  %246 = getelementptr inbounds %"class.ruy::Allocator", %"class.ruy::Allocator"* %241, i64 0, i32 1
  %247 = load i64, i64* %246, align 8
  %248 = add nsw i64 %245, %247
  %249 = getelementptr inbounds %"class.ruy::Allocator", %"class.ruy::Allocator"* %241, i64 0, i32 2
  %250 = load i64, i64* %249, align 8
  %251 = icmp sgt i64 %248, %250
  br i1 %251, label %257, label %252

252:                                              ; preds = %233
  %253 = getelementptr inbounds %"class.ruy::Allocator", %"class.ruy::Allocator"* %241, i64 0, i32 0
  %254 = load i8*, i8** %253, align 8
  %255 = getelementptr inbounds i8, i8* %254, i64 %247
  store i64 %248, i64* %246, align 8
  %256 = icmp eq i8* %255, null
  br i1 %256, label %257, label %259

257:                                              ; preds = %252, %233
  %258 = tail call i8* @_ZN3ruy9Allocator12AllocateSlowEl(%"class.ruy::Allocator"* %241, i64 %245) #6
  br label %259

259:                                              ; preds = %257, %252
  %260 = phi i8* [ %258, %257 ], [ %255, %252 ]
  store i8* %260, i8** %243, align 8
  tail call void @llvm.memset.p0i8.i64(i8* align 1 %260, i8 0, i64 %242, i1 false)
  br label %261

261:                                              ; preds = %259, %66
  %262 = getelementptr inbounds %"struct.ruy::(anonymous namespace)::TrMulTask", %"struct.ruy::(anonymous namespace)::TrMulTask"* %0, i64 0, i32 7
  %263 = load %"class.ruy::TuningResolver"*, %"class.ruy::TuningResolver"** %262, align 8
  %264 = tail call i32 @_ZN3ruy14TuningResolver7ResolveEv(%"class.ruy::TuningResolver"* %263) #6
  %265 = load %"struct.ruy::BlockMap"*, %"struct.ruy::BlockMap"** %9, align 8
  %266 = getelementptr inbounds %"struct.ruy::BlockMap", %"struct.ruy::BlockMap"* %265, i64 0, i32 3
  %267 = load i32, i32* %266, align 4
  %268 = shl i32 %267, 1
  %269 = getelementptr inbounds %"struct.ruy::BlockMap", %"struct.ruy::BlockMap"* %265, i64 0, i32 4, i32 0, i64 0
  %270 = load i32, i32* %269, align 4
  %271 = add nsw i32 %268, %270
  %272 = getelementptr inbounds %"struct.ruy::BlockMap", %"struct.ruy::BlockMap"* %265, i64 0, i32 4, i32 0, i64 1
  %273 = load i32, i32* %272, align 4
  %274 = add nsw i32 %271, %273
  %275 = shl i32 1, %274
  %276 = getelementptr inbounds %"struct.ruy::(anonymous namespace)::TrMulTask", %"struct.ruy::(anonymous namespace)::TrMulTask"* %0, i64 0, i32 4
  %277 = load i32, i32* %276, align 8
  %278 = icmp slt i32 %277, %275
  br i1 %278, label %15, label %231
}

; Function Attrs: nobuiltin nounwind
declare void @_ZdlPv(i8*) local_unnamed_addr #5

declare i32 @_ZN3ruy14TuningResolver7ResolveEv(%"class.ruy::TuningResolver"*) local_unnamed_addr #2

declare void @_ZN3ruy15GetBlockByIndexERKNS_8BlockMapEiPNS_8SidePairIiEE(%"struct.ruy::BlockMap"* dereferenceable(52), i32, %"class.ruy::SidePair.1"*) local_unnamed_addr #2

declare void @_ZN3ruy20GetBlockMatrixCoordsERKNS_8BlockMapERKNS_8SidePairIiEEPS4_S7_(%"struct.ruy::BlockMap"* dereferenceable(52), %"class.ruy::SidePair.1"* dereferenceable(8), %"class.ruy::SidePair.1"*, %"class.ruy::SidePair.1"*) local_unnamed_addr #2

declare void @_ZN3ruy20GetBlockMatrixCoordsENS_4SideERKNS_8BlockMapEiPiS4_(i32, %"struct.ruy::BlockMap"* dereferenceable(52), i32, i32*, i32*) local_unnamed_addr #2

declare void @_ZN3ruy10ThreadPool11ExecuteImplEiiPNS_4TaskE(%"class.ruy::ThreadPool"*, i32, i32, %"struct.ruy::Task"*) local_unnamed_addr #2

attributes #0 = { nounwind ssp uwtable "correctly-rounded-divide-sqrt-fp-math"="false" "disable-tail-calls"="false" "less-precise-fpmad"="false" "min-legal-vector-width"="0" "no-frame-pointer-elim"="false" "no-frame-pointer-elim-non-leaf" "no-infs-fp-math"="false" "no-jump-tables"="false" "no-nans-fp-math"="false" "no-signed-zeros-fp-math"="false" "no-trapping-math"="false" "null-pointer-is-valid"="true" "stack-protector-buffer-size"="4" "target-cpu"="x86-64" "target-features"="+cx8,+fxsr,+mmx,+sse,+sse2,+sse3,+x87" "unsafe-fp-math"="false" "use-soft-float"="false" }
attributes #1 = { argmemonly nounwind }
attributes #2 = { "correctly-rounded-divide-sqrt-fp-math"="false" "disable-tail-calls"="false" "less-precise-fpmad"="false" "no-frame-pointer-elim"="false" "no-frame-pointer-elim-non-leaf" "no-infs-fp-math"="false" "no-nans-fp-math"="false" "no-signed-zeros-fp-math"="false" "no-trapping-math"="false" "null-pointer-is-valid"="true" "stack-protector-buffer-size"="4" "target-cpu"="x86-64" "target-features"="+cx8,+fxsr,+mmx,+sse,+sse2,+sse3,+x87" "unsafe-fp-math"="false" "use-soft-float"="false" }
attributes #3 = { nounwind readnone speculatable }
attributes #4 = { inlinehint nounwind ssp uwtable "correctly-rounded-divide-sqrt-fp-math"="false" "disable-tail-calls"="false" "less-precise-fpmad"="false" "min-legal-vector-width"="0" "no-frame-pointer-elim"="false" "no-frame-pointer-elim-non-leaf" "no-infs-fp-math"="false" "no-jump-tables"="false" "no-nans-fp-math"="false" "no-signed-zeros-fp-math"="false" "no-trapping-math"="false" "null-pointer-is-valid"="true" "stack-protector-buffer-size"="4" "target-cpu"="x86-64" "target-features"="+cx8,+fxsr,+mmx,+sse,+sse2,+sse3,+x87" "unsafe-fp-math"="false" "use-soft-float"="false" }
attributes #5 = { nobuiltin nounwind "correctly-rounded-divide-sqrt-fp-math"="false" "disable-tail-calls"="false" "less-precise-fpmad"="false" "no-frame-pointer-elim"="false" "no-frame-pointer-elim-non-leaf" "no-infs-fp-math"="false" "no-nans-fp-math"="false" "no-signed-zeros-fp-math"="false" "no-trapping-math"="false" "null-pointer-is-valid"="true" "stack-protector-buffer-size"="4" "target-cpu"="x86-64" "target-features"="+cx8,+fxsr,+mmx,+sse,+sse2,+sse3,+x87" "unsafe-fp-math"="false" "use-soft-float"="false" }
attributes #6 = { nounwind }
attributes #7 = { builtin nounwind }

!llvm.module.flags = !{!0, !1}

!0 = !{i32 1, !"wchar_size", i32 4}
!1 = !{i32 7, !"PIC Level", i32 2}
!2 = !{i32 0, i32 33}
!3 = !{i8 0, i8 2}
